<!DOCTYPE html>
<html lang="en">

<head>

    <title>
	  
	    Post
	  
	</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<!-- Open Graph -->

    <meta content="Business Science" property="og:site_name">
    <meta name="author" content="mattdancho.com" />

    
      <meta content="Post" property="og:title">
      <meta content="Post" property="twitter:title"/>
    

    
      <meta content="article" property="og:type">
    

    
    <meta name="description" content="Applying data science to business and investments">
    <meta property="og:description" content="Applying data science to business and investments" />
    

    
      <meta content="http://www.mattdancho.com/Business/2016/09/04/CustomerSegmentationPt2.html" property="og:url">
    

    
      <meta content="2016-09-04T00:00:00-04:00" property="article:published_time">
      <meta content="http://www.mattdancho.com/about/" property="article:author">
    

    
      <meta content="http://www.mattdancho.com/assets/custSegments2.png" property="og:image">
    

    
      
      <meta content="Business" property="article:section">
      
    

    
      
      <meta content="R-Project" property="article:tag">
      
      <meta content="R" property="article:tag">
      
      <meta content="Customer Segmentation" property="article:tag">
      
      <meta content="Community Detection" property="article:tag">
      
      <meta content="PCA" property="article:tag">
      
      <meta content="prcomp" property="article:tag">
      
      <meta content="bikes data set" property="article:tag">
      
    

<!-- Twitter Card -->

  <!-- <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@site_username">
  <meta name="twitter:creator" content="@creator_username">
  
    <meta name="twitter:title" content="Post">
  
  
    <meta name="twitter:url" content="http://www.mattdancho.com/Business/2016/09/04/CustomerSegmentationPt2.html">
  
  
    <meta name="twitter:description" content="Applying data science to business and investments">
  
  
    <meta name="twitter:image:src" content="http://www.mattdancho.com/img/custSegments2.png">
   -->

    <link rel="alternate" type="application/atom+xml" title="mattdancho.com" href="/atom.xml" />

<link rel="alternate" type="application/rss+xml" title="mattdancho.com" href="/feed.xml" />




    <!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>

        <link rel="icon" type="image/x-icon" href="/img/favicon.ico" />

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="/css/bootstrap.min-flatly.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/css/freelancer.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/table.css" rel="stylesheet">

    <!-- Highlightjs -->
    <link rel="stylesheet" href="/css/github.css">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Greensock -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>

    <!-- Scrollmagic -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/debug.addIndicators.min.js"></script>



</head>

<body id="page-top" class="index">

	

	<!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Business Science</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                <!-- Nav Links: Maintained in data/nav.csv -->
                <ul class="nav navbar-nav navbar-right">
    				

                    <!-- Search site using Google's index -->
                    <li>
                        <form class="navbar-form navbar-right" role="search" method="get" action="http://google.com/search">
                          <div class="row">
                              <div class="col-xs-8">
                                  <div class="form-group" id="inline">
                                    <input type="hidden" name="q" value="site:mattdancho.com" />
                                    <input type="text" class="form-control search-query" name="q" placeholder="Search"/>
                                  </div>
                              </div>
                              <div class="col-xs-2">
                                  <button type="submit" class="btn btn-default"><i class="fa fa-search fa-lg"></i></button>
                              </div>
                          </div>
                        </form>
                    </li>
				</ul>

            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>


	<!-- Blog Head -->
<header id="header" class="">
	<section class="success" id="blog">
		<div class= "container">
			<div class="row">
			  	<div class="col-lg-12 text-center">
			  		<div class="text-center">
					    <h1>Post</h1>
					    <p>Written on September  4, 2016</p>
					    <p>

<div class="post-tags">
  Categories:
  
    
  
  
  <li>
  	<a href="/categories/#Business">Business</a>
  </li>

  
</div></p>
					    <p>

<div class="post-tags">
  Tags:
  
    
  
  
  <li>
  	<a href="/tags/#R-Project">R-Project</a>,
  </li>

  
  <li>
  	<a href="/tags/#R">R</a>,
  </li>

  
  <li>
  	<a href="/tags/#Customer Segmentation">Customer Segmentation</a>,
  </li>

  
  <li>
  	<a href="/tags/#Community Detection">Community Detection</a>,
  </li>

  
  <li>
  	<a href="/tags/#PCA">PCA</a>,
  </li>

  
  <li>
  	<a href="/tags/#prcomp">prcomp</a>,
  </li>

  
  <li>
  	<a href="/tags/#bikes data set">bikes data set</a>
  </li>

  
</div></p>

					    <ul class="list-inline">
					    	<!-- Facebook -->
                            <li>
                                <div class="fb-share-button" data-href="http://www.mattdancho.com/Business/2016/09/04/CustomerSegmentationPt2.html" data-layout="box_count" data-size="small" data-mobile-iframe="true" style="bottom: 5px;"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">Share</a></div>
                            </li>
                            <!-- LinkedIn -->
                            <li>
                                <script type="text/javascript" src="//platform.linkedin.com/in.js"></script><script type="in/share" data-counter="top"></script>
                            </li>
                            <!-- Google+ -->
                            <li>
                                <div class="g-plus" data-action="share" data-annotation="vertical-bubble" data-height="60"></div>
                            </li>
                    		<!-- Twitter -->
                            <li>
                                <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
                            </li>
                        </ul>
					</div>
			  	</div>
			</div>
		</div>
	</section>
</header>

<!-- Blog Body -->
<section id="blog">

  <div class="container" id="blog_content">
    <!-- <div class="col-md-8 col-md-offset-2"> -->
    <div class="row">
    	<!-- Main Content -->
    	<div class="col-md-8 col-md-offset-1" role="main">
	  		<p><img class="shadow" src="/assets/custSegments2.png" style="margin-top: 0px;"></p>
	  		<hr class="margin-bottom-40">
	    	<p>This post is the second part in the customer segmentation analysis. The <a href="http://www.mattdancho.com/business/2016/08/07/CustomerSegmentationPt1.html">first post</a> focused on <a href="https://en.wikipedia.org/wiki/K-means_clustering"><em>k</em>-means clustering</a> in <code>R</code> to segment customers into distinct groups based on purchasing habits. This post takes a different approach, using <a href="https://en.wikipedia.org/wiki/Principal_component_analysis">Pricipal Component Analysis</a> (PCA) in <code>R</code> as a tool to view customer groups. Because PCA attacks the problem from a different angle than <em>k</em>-means, we can get different insights. We’ll compare both the <em>k</em>-means results with the PCA visualization. Let’s see what happens when we apply PCA.  </p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#pca">Why PCA?</a></li>
  <li><a href="#left-off">Where We Left Off</a></li>
  <li><a href="#getting-ready">Getting Ready for PCA</a>
    <ul>
      <li><a href="#get-data">Getting the Data</a></li>
      <li><a href="#read-data">Reading the Data</a></li>
      <li><a href="#manipulate-data">Manipulating the Data</a></li>
      <li><a href="#kmeans">K-Means Clustering</a></li>
    </ul>
  </li>
  <li><a href="#applying-pca">Applying PCA</a></li>
  <li><a href="#visualizing-results">Visualizing the Results</a>
    <ul>
      <li><a href="#plotting">Plotting the PC’s</a></li>
      <li><a href="#pca-k4">PCA Viz: K=4 K-Means Grouping</a></li>
      <li><a href="#pca-k5">PCA Viz: K=5 K-Means Grouping</a></li>
      <li><a href="#visual-inspection">PCA Viz: Visual Inspection Grouping</a></li>
      <li><a href="#group2">Group 2 Inspection</a></li>
      <li><a href="#group4">Group 4 Inspection</a></li>
    </ul>
  </li>
  <li><a href="#conclusions">Conclusions</a></li>
  <li><a href="#recap">Recap</a></li>
  <li><a href="#further-reading">Further Reading</a></li>
</ul>

<h2 id="why-pca-a-classanchor-idpcaa">Why PCA? <a class="anchor" id="pca"></a></h2>

<p>PCA is a dimensionality reduction algorithm: PCA takes your data and decomposes it using transformations into principal components (PC). Each PC is selected in the orthogonal direction that maximizes the linear variance of the data. In essence, PCA is nothing more than an algorithm that takes numeric data in x, y, z coordinates and changes the coordinates to x’, y’, and z’ that maximize the linear variance. A great article on the background behind PCA is <a href="http://setosa.io/ev/principal-component-analysis/">Pricipal Component Analysis: Explained Visually</a>. As the title suggests, the article has great visuals to explain the algorithm. </p>

<p>How does this help in customer segmentation / community detection? Unlike <em>k</em>-means, PCA is not a direct solution. What PCA helps with is visualizing the essence of a data set. Because PCA selects PC’s based on the maximum linear variance, we can use the first few PC’s to describe a vast majority of the data set without needing to compare and contrast every single feature. By using PC1 and PC2, we can then visualize in 2D and inspect for clusters. We can also combine the results with the <em>k</em>-means groups to see what <em>k</em>-means detected as compared to the clusters in the PCA visualization.</p>

<p>Before we jump into PCA, it’s a good idea to review where we left off in the previous customer segmentation post.</p>

<h2 id="where-we-left-off-a-classanchor-idleft-offa">Where We Left Off <a class="anchor" id="left-off"></a></h2>

<p>In the <a href="http://www.mattdancho.com/business/2016/08/07/CustomerSegmentationPt1.html">first post</a>, we used <em>k</em>-means clustering to analyze the <code>bikes data set</code>, a collection of excel files that contains data for bike shops (customers), bikes (products), and sales orders for the bike manufacturer, <a href="http://www.cannondale.com/"><em>Cannondale</em></a>. The bike shops and sales orders are fictional / simulated (see the <a href="http://www.mattdancho.com/business/2016/07/12/orderSimulatoR.html">orderSimulatoR post</a> for more on this), but the bikes (products) are actual models from <em>Cannondale’s</em> website. </p>

<p>A hypothesis was formed that bike shops purchase bikes based on bike features such as unit price (high end vs affordable), primary category (Mountain vs Road), frame (aluminum vs carbon), etc. The sales orders were combined with the customer and product information and grouped to form a matrix of sales by model and customer. The <code>kmeans()</code> function was run on a range of potential clusters, <em>k</em>, and the <code>silhouette()</code> function from the <code>cluster</code> package was used to determine the optimal number of clusters.</p>

<h2 id="getting-ready-for-pca-a-classanchor-idgetting-readya">Getting Ready for PCA <a class="anchor" id="getting-ready"></a></h2>

<p>Rather than run through the previous post, the sections below can be used to get everthing ready for PCA.</p>

<h4 id="getting-the-data-a-classanchor-idget-dataa">Getting the Data <a class="anchor" id="get-data"></a></h4>

<p>You can access the data <a href="https://github.com/mdancho84/orderSimulatoR/tree/master/data">here</a> if you would like to follow along. You’ll need to download the following files:</p>

<ul>
  <li>
    <p><strong>orders.xlsx</strong>: Contains the fictional sales orders for <em>Cannondale</em>. <code>customer.id</code> in the <strong>orders.xlsx</strong> file relates to <code>bike shop.id</code> in the <strong>bikeshops.xlsx</strong> file, and <code>product.id</code> in the <strong>orders.xlsx</strong> file relates to <code>bike.id</code> in the <strong>bikes.xlsx</strong> file.</p>
  </li>
  <li>
    <p><strong>bikes.xlsx</strong>:  Contains information on products (e.g. bike model, primary category, secondary category, unit price, etc). <code>bike.id</code> is the primary key.</p>
  </li>
  <li>
    <p><strong>bikeshops.xlsx</strong>: Contains information on customers (e.g. customer name and location). <code>bikeshop.id</code> is the primary key. </p>
  </li>
</ul>

<p>The script to load and configure the data into a customer trends matrix is shown below. </p>

<h4 id="reading-the-data-a-classanchor-idread-dataa">Reading the Data <a class="anchor" id="read-data"></a></h4>

<p>This script will read the data. Make sure you have the excel files in a folder named “data” in your current working directory prior to running the script below.</p>

<div>
  <pre><code class="r"># Read Cannondale orders data --------------------------------------------------
library(xlsx)   # Used to read bikes data set
customers &lt;- read.xlsx2(&quot;./data/bikeshops.xlsx&quot;, sheetIndex = 1,
                       colClasses = c(&quot;numeric&quot;, &quot;character&quot;, &quot;character&quot;,
                                      &quot;character&quot;, &quot;character&quot;, &quot;numeric&quot;))
products &lt;- read.xlsx2(&quot;./data/bikes.xlsx&quot;, sheetIndex = 1,
                        colClasses = c(&quot;numeric&quot;, &quot;character&quot;, &quot;character&quot;,
                                       &quot;character&quot;, &quot;character&quot;, &quot;numeric&quot;))
orders &lt;- read.xlsx2(&quot;./data/orders.xlsx&quot;, sheetIndex = 1, colIndex = 2:7,
                     colClasses = c(&quot;numeric&quot;, &quot;numeric&quot;, &quot;Date&quot;, &quot;numeric&quot;,
                                    &quot;numeric&quot;, &quot;numeric&quot;))</code></pre>
</div>

<h4 id="manipulating-the-data-a-classanchor-idmanipulate-dataa">Manipulating the Data <a class="anchor" id="manipulate-data"></a></h4>

<p>The script below combines the <code>orders</code>, <code>customers</code> and <code>products</code> data frames into <code>orders.extended</code>, which is a data frame that simulates output we would get from an SQL query of a sales orders database / ERP system. The data is then manipulated to form <code>customerTrends</code>, which has the data structured such that the rows contain products and the columns contain purchase quantity (as percentage of total) by customer. The output, <code>customerTrends</code>, is then used for <em>k</em>-means clustering.</p>

<div>
  <pre><code class="r"># Combine orders, customers, and products data frames --------------------------
library(dplyr)
orders.extended &lt;- merge(orders, customers, by.x = &quot;customer.id&quot;, by.y=&quot;bikeshop.id&quot;)
orders.extended &lt;- merge(orders.extended, products, by.x = &quot;product.id&quot;, by.y = &quot;bike.id&quot;)
orders.extended &lt;- orders.extended %&gt;%
  mutate(price.extended = price * quantity) %&gt;%
  select(order.date, order.id, order.line, bikeshop.name, model,
         quantity, price, price.extended, category1, category2, frame) %&gt;%
  arrange(order.id, order.line)

# Group by model &amp; model features, summarize by quantity purchased -------------
library(tidyr)  # For spread function
customerTrends &lt;- orders.extended %&gt;%
  group_by(bikeshop.name, model, category1, category2, frame, price) %&gt;%
  summarise(total.qty = sum(quantity)) %&gt;%
  spread(bikeshop.name, total.qty)
customerTrends[is.na(customerTrends)] &lt;- 0  # Remove NA's

# Convert price to binary high/low category ------------------------------------
library(Hmisc)  # Needed for cut2 function
customerTrends$price &lt;- cut2(customerTrends$price, g=2)

# Convert customer purchase quantity to percentage of total quantity -----------
customerTrends.mat &lt;- as.matrix(customerTrends[,-(1:5)])  # Drop first five columns
customerTrends.mat &lt;- prop.table(customerTrends.mat, margin = 2)  # column-wise pct
customerTrends &lt;- bind_cols(customerTrends[,1:5], as.data.frame(customerTrends.mat))</code></pre>
</div>

<p>Here’s the first 6 rows of <code>customerTrends</code>:</p>

<div>
  <pre><code class="r">knitr::kable(head(customerTrends))</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th style="text-align: left">model</th>
      <th style="text-align: left">category1</th>
      <th style="text-align: left">category2</th>
      <th style="text-align: left">frame</th>
      <th style="text-align: left">price</th>
      <th style="text-align: right">Albuquerque Cycles</th>
      <th style="text-align: right">Ann Arbor Speed</th>
      <th style="text-align: right">Austin Cruisers</th>
      <th style="text-align: right">Cincinnati Speed</th>
      <th style="text-align: right">Columbus Race Equipment</th>
      <th style="text-align: right">Dallas Cycles</th>
      <th style="text-align: right">Denver Bike Shop</th>
      <th style="text-align: right">Detroit Cycles</th>
      <th style="text-align: right">Indianapolis Velocipedes</th>
      <th style="text-align: right">Ithaca Mountain Climbers</th>
      <th style="text-align: right">Kansas City 29ers</th>
      <th style="text-align: right">Las Vegas Cycles</th>
      <th style="text-align: right">Los Angeles Cycles</th>
      <th style="text-align: right">Louisville Race Equipment</th>
      <th style="text-align: right">Miami Race Equipment</th>
      <th style="text-align: right">Minneapolis Bike Shop</th>
      <th style="text-align: right">Nashville Cruisers</th>
      <th style="text-align: right">New Orleans Velocipedes</th>
      <th style="text-align: right">New York Cycles</th>
      <th style="text-align: right">Oklahoma City Race Equipment</th>
      <th style="text-align: right">Philadelphia Bike Shop</th>
      <th style="text-align: right">Phoenix Bi-peds</th>
      <th style="text-align: right">Pittsburgh Mountain Machines</th>
      <th style="text-align: right">Portland Bi-peds</th>
      <th style="text-align: right">Providence Bi-peds</th>
      <th style="text-align: right">San Antonio Bike Shop</th>
      <th style="text-align: right">San Francisco Cruisers</th>
      <th style="text-align: right">Seattle Race Equipment</th>
      <th style="text-align: right">Tampa 29ers</th>
      <th style="text-align: right">Wichita Speed</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Bad Habit 1</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0174825</td>
      <td style="text-align: right">0.0066445</td>
      <td style="text-align: right">0.0081301</td>
      <td style="text-align: right">0.0051151</td>
      <td style="text-align: right">0.0101523</td>
      <td style="text-align: right">0.0128205</td>
      <td style="text-align: right">0.0117340</td>
      <td style="text-align: right">0.0099206</td>
      <td style="text-align: right">0.0062696</td>
      <td style="text-align: right">0.0181962</td>
      <td style="text-align: right">0.0181504</td>
      <td style="text-align: right">0.0016026</td>
      <td style="text-align: right">0.0062893</td>
      <td style="text-align: right">0.0075949</td>
      <td style="text-align: right">0.0042135</td>
      <td style="text-align: right">0.0182648</td>
      <td style="text-align: right">0.0086705</td>
      <td style="text-align: right">0.0184783</td>
      <td style="text-align: right">0.0074074</td>
      <td style="text-align: right">0.0129870</td>
      <td style="text-align: right">0.0244898</td>
      <td style="text-align: right">0.0112755</td>
      <td style="text-align: right">0.0159151</td>
      <td style="text-align: right">0.0108696</td>
      <td style="text-align: right">0.0092251</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0026738</td>
      <td style="text-align: right">0.0156250</td>
      <td style="text-align: right">0.0194175</td>
      <td style="text-align: right">0.0059172</td>
    </tr>
    <tr>
      <td style="text-align: left">Bad Habit 2</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0069930</td>
      <td style="text-align: right">0.0099668</td>
      <td style="text-align: right">0.0040650</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0170940</td>
      <td style="text-align: right">0.0139070</td>
      <td style="text-align: right">0.0158730</td>
      <td style="text-align: right">0.0031348</td>
      <td style="text-align: right">0.0110759</td>
      <td style="text-align: right">0.0158456</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0094340</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0112360</td>
      <td style="text-align: right">0.0167428</td>
      <td style="text-align: right">0.0173410</td>
      <td style="text-align: right">0.0021739</td>
      <td style="text-align: right">0.0074074</td>
      <td style="text-align: right">0.0095238</td>
      <td style="text-align: right">0.0040816</td>
      <td style="text-align: right">0.0190275</td>
      <td style="text-align: right">0.0026525</td>
      <td style="text-align: right">0.0108696</td>
      <td style="text-align: right">0.0239852</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0026738</td>
      <td style="text-align: right">0.0078125</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">Beast of the East 1</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0104895</td>
      <td style="text-align: right">0.0149502</td>
      <td style="text-align: right">0.0081301</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0042735</td>
      <td style="text-align: right">0.0182529</td>
      <td style="text-align: right">0.0119048</td>
      <td style="text-align: right">0.0094044</td>
      <td style="text-align: right">0.0213608</td>
      <td style="text-align: right">0.0181504</td>
      <td style="text-align: right">0.0016026</td>
      <td style="text-align: right">0.0251572</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0140449</td>
      <td style="text-align: right">0.0167428</td>
      <td style="text-align: right">0.0086705</td>
      <td style="text-align: right">0.0086957</td>
      <td style="text-align: right">0.0172840</td>
      <td style="text-align: right">0.0242424</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0126850</td>
      <td style="text-align: right">0.0053050</td>
      <td style="text-align: right">0.0108696</td>
      <td style="text-align: right">0.0092251</td>
      <td style="text-align: right">0.0053763</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0156250</td>
      <td style="text-align: right">0.0097087</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">Beast of the East 2</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0104895</td>
      <td style="text-align: right">0.0099668</td>
      <td style="text-align: right">0.0081301</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0050761</td>
      <td style="text-align: right">0.0042735</td>
      <td style="text-align: right">0.0152108</td>
      <td style="text-align: right">0.0059524</td>
      <td style="text-align: right">0.0094044</td>
      <td style="text-align: right">0.0181962</td>
      <td style="text-align: right">0.0138289</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0220126</td>
      <td style="text-align: right">0.0050633</td>
      <td style="text-align: right">0.0084270</td>
      <td style="text-align: right">0.0076104</td>
      <td style="text-align: right">0.0086705</td>
      <td style="text-align: right">0.0097826</td>
      <td style="text-align: right">0.0172840</td>
      <td style="text-align: right">0.0086580</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0232558</td>
      <td style="text-align: right">0.0106101</td>
      <td style="text-align: right">0.0155280</td>
      <td style="text-align: right">0.0147601</td>
      <td style="text-align: right">0.0107527</td>
      <td style="text-align: right">0.0026738</td>
      <td style="text-align: right">0.0234375</td>
      <td style="text-align: right">0.0291262</td>
      <td style="text-align: right">0.0019724</td>
    </tr>
    <tr>
      <td style="text-align: left">Beast of the East 3</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0034965</td>
      <td style="text-align: right">0.0033223</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0025381</td>
      <td style="text-align: right">0.0042735</td>
      <td style="text-align: right">0.0169492</td>
      <td style="text-align: right">0.0119048</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0102848</td>
      <td style="text-align: right">0.0181504</td>
      <td style="text-align: right">0.0032051</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0050633</td>
      <td style="text-align: right">0.0042135</td>
      <td style="text-align: right">0.0152207</td>
      <td style="text-align: right">0.0202312</td>
      <td style="text-align: right">0.0043478</td>
      <td style="text-align: right">0.0049383</td>
      <td style="text-align: right">0.0051948</td>
      <td style="text-align: right">0.0204082</td>
      <td style="text-align: right">0.0162086</td>
      <td style="text-align: right">0.0026525</td>
      <td style="text-align: right">0.0201863</td>
      <td style="text-align: right">0.0073801</td>
      <td style="text-align: right">0.0322581</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0078125</td>
      <td style="text-align: right">0.0097087</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">CAAD Disc Ultegra</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Elite Road</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0139860</td>
      <td style="text-align: right">0.0265781</td>
      <td style="text-align: right">0.0203252</td>
      <td style="text-align: right">0.0153453</td>
      <td style="text-align: right">0.0101523</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0108648</td>
      <td style="text-align: right">0.0079365</td>
      <td style="text-align: right">0.0094044</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0106598</td>
      <td style="text-align: right">0.0112179</td>
      <td style="text-align: right">0.0157233</td>
      <td style="text-align: right">0.0278481</td>
      <td style="text-align: right">0.0210674</td>
      <td style="text-align: right">0.0182648</td>
      <td style="text-align: right">0.0375723</td>
      <td style="text-align: right">0.0152174</td>
      <td style="text-align: right">0.0172840</td>
      <td style="text-align: right">0.0103896</td>
      <td style="text-align: right">0.0163265</td>
      <td style="text-align: right">0.0126850</td>
      <td style="text-align: right">0.0026525</td>
      <td style="text-align: right">0.0139752</td>
      <td style="text-align: right">0.0073801</td>
      <td style="text-align: right">0.0053763</td>
      <td style="text-align: right">0.0026738</td>
      <td style="text-align: right">0.0078125</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0098619</td>
    </tr>
  </tbody>
</table>

<h4 id="k-means-clustering-a-classanchor-idkmeansa">K-Means Clustering <a class="anchor" id="kmeans"></a></h4>

<p>We used the <code>kmeans()</code> function to perform <em>k</em>-means clustering. The <a href="(http://www.mattdancho.com/business/2016/08/07/CustomerSegmentationPt1.html)"><em>k</em>-means post</a> goes into great detail on how to select the right number of clusters, which I skipped for brevity. We’ll use the groups for <script type="math/tex">k = 4</script> and <script type="math/tex">k = 5</script> clusters with the PCA analysis. Five clusters was the theoretical best solution, and four clusters was the best solution upon inspection of the data.</p>

<div>
  <pre><code class="r"># K-Means Clustering (used later) ----------------------------------------------
set.seed(11) # For reproducibility
km4.out &lt;- kmeans(t(customerTrends[,-(1:5)]), centers = 4, nstart = 50)

set.seed(11) # For reproducibility
km5.out &lt;- kmeans(t(customerTrends[,-(1:5)]), centers = 5, nstart = 50)</code></pre>
</div>

<h2 id="applying-pca-a-classanchor-idapplying-pcaa">Applying PCA <a class="anchor" id="applying-pca"></a></h2>

<p>Now, back to our main focus: PCA. Applying PCA is very simple once the data is formatted. We use the <code>prcomp()</code> function available in base <code>R</code>. It’s strongly recommended to scale and center the data (for some reason this is not the default). Further reading on PCA in <code>R</code> can be found <a href="https://tgmstat.wordpress.com/2013/11/28/computing-and-visualizing-pca-in-r/">here</a>.</p>

<div>
  <pre><code class="r"># PCA using prcomp() -----------------------------------------------------------
pca &lt;- prcomp(t(customerTrends[,-(1:5)]), scale. = T, center = T) # Perform PCA</code></pre>
</div>

<p>Once PCA is performed, it’s a good idea to take a look at the <strong>variance explained</strong>. As stated before, the goal of PCA is to reduce the dimensions of the data. PCA does this by transforming the data into dimensions that are orthogonal to the variation. The greater the variance explained, the more information that is summarized by the PC. The <code>prcomp()</code> function returns this variance by PC. You can use <code>summary(pca)</code> to get the variance explained. Let’s take a look at the first nine PC’s visually. </p>

<iframe src="/figure/source/2016-9-4-CustomerSegmentationPt2/plotly1.html" style="border: none; width: 100%; height: 400px"></iframe>

<p>PC1 and PC2 combined explain 44% of the variance of the data, and there’s a steep drop-off between PC2 and PC3. This means that plotting PC’s 1 and 2 will give us a reasonably good understanding of the data, and adding more PC’s beyond PC2 will result in minimal improvement. Note that it won’t always happen that there is a significant drop-off after PC2, and if more PC’s explain variance we would need to evaluate them as well. </p>

<h2 id="visualizing-the-results-a-classanchor-idvisualizing-resultsa">Visualizing the Results <a class="anchor" id="visualizing-results"></a></h2>

<p>We’ll plot PC1 and PC2, and we’ll color the clusters initially using the k-means groups previously created. To do this, we first need to get the <code>pca</code> data into a data frame that combines the customers with the PC’s. Luckily, the <code>ggfortify</code> package has a function called <code>fortify()</code> to do just that. Once our data is fortified, we create two data frames with the k-means groups added to the end so we can group on them. We’ll use the <em>k</em>-means group to color the PCA results so we can compare to <em>k</em>-means and gain insights. </p>

<div>
  <pre><code class="r"># Manipulate data for PCA Analyis ----------------------------------------------
library(ggfortify) # For fortify()
pca.fortify &lt;- fortify(pca) # fortify() gets pca into usable format

# Add group (short for color) column using k=4 and k=5 groups
pca4.dat &lt;- cbind(pca.fortify, group=km4.out$cluster)
pca5.dat &lt;- cbind(pca.fortify, group=km5.out$cluster)</code></pre>
</div>

<h4 id="plotting-the-pcs-a-classanchor-idplottinga">Plotting the PC’s <a class="anchor" id="plotting"></a></h4>

<p>The script below provides sample <code>ggplot</code> scripts to create a general plot for PC1 and PC2. The script uses my favorite interactive plotting library, <code>plotly</code>, to turn the <code>ggplot</code> results into interactive plots. The scripts used for the next section follow the same general procedure, so I won’t show the code for brevity.</p>

<div>
  <pre><code class="r"># Plotting PC1 and PC2 using ggplot and plotly ---------------------------------
library(ggplot2)
library(plotly)
# Script for plotting k=4
gg2 &lt;- ggplot(pca4.dat) +
  geom_point(aes(x=PC1, y=PC2, col=factor(group), text=rownames(pca4.dat)), size=2) +
  labs(title = &quot;Visualizing K-Means Clusters Against First Two Principal Components&quot;) +
  scale_color_brewer(name=&quot;&quot;, palette = &quot;Set1&quot;)
# Use plotly for inteactivity
plotly2 &lt;- ggplotly(gg2, tooltip = c(&quot;text&quot;, &quot;x&quot;, &quot;y&quot;)) %&gt;%
  layout(legend = list(x=.9, y=.99))</code></pre>
</div>

<h4 id="pca-viz-k4-k-means-grouping-a-classanchor-idpca-k4a">PCA Viz: K=4 K-Means Grouping <a class="anchor" id="pca-k4"></a></h4>

<p>The PCA segmentation shows some interesting results. It appears that there are five clusters as opposed to four. The <script type="math/tex">k = 4</script> <em>k</em>-means results would not pick this up, because we selected four clusters. Maybe your thinking that the silhouette analysis from the previous post indicated that we should pick <script type="math/tex">k = 5</script>, so this is where we went wrong. Let’s see what happens with the five cluster <em>k</em>-means.</p>

<iframe src="/figure/source/2016-9-4-CustomerSegmentationPt2/plotly2.html" style="border: none; width: 100%; height: 550px"></iframe>

<h4 id="pca-viz-k5-k-means-grouping-a-classanchor-idpca-k5a">PCA Viz: K=5 K-Means Grouping <a class="anchor" id="pca-k5"></a></h4>

<p>Well, that’s not what we thought was going to happen! It looks like Group 2 was incorrectly classified. From the <em>k</em>-means post, this actually makes sense: We inspected the clusters, and Group 2 and 4 were very similar in their preferences for bikes in the low-end price range. We decided to combine these clusters by switching to <script type="math/tex">k = 4</script> clusters. Next, we’ll look at clustering based on inspection of the PCA plot.</p>

<iframe src="/figure/source/2016-9-4-CustomerSegmentationPt2/plotly3.html" style="border: none; width: 100%; height: 550px"></iframe>

<h4 id="pca-viz-visual-inspection-grouping-a-classanchor-idvisual-inspectiona">PCA Viz: Visual Inspection Grouping <a class="anchor" id="visual-inspection"></a></h4>

<p>From the PCA visualization, we can see there are two bike shops that do not belong to Group 4. Based on our visual inspection, we can modify the groups (column 128) by switching Group 2 (San Antonio Bike Shop &amp; Philadelphia Bike Shop) with the incorrectly classified Group 4 shops (Denver Bike Shop &amp; Kansas City 29ers). </p>

<div>
  <pre><code class="r"># Switch Group 2 Bike Shops with misclassified Bike Shops in Group 4 -----------
pca.final.dat &lt;- pca5.dat
pca.final.dat[rownames(pca.final.dat) %in% 
                c(&quot;San Antonio Bike Shop&quot;, &quot;Philadelphia Bike Shop&quot;), 128] &lt;- 4
pca.final.dat[rownames(pca.final.dat) %in% 
                c(&quot;Denver Bike Shop&quot;, &quot;Kansas City 29ers&quot;), 128] &lt;- 2</code></pre>
</div>

<p>And, let’s visualize the results. </p>

<iframe src="/figure/source/2016-9-4-CustomerSegmentationPt2/plotly4.html" style="border: none; width: 100%; height: 550px"></iframe>

<p>Everything looks good, but we need to inspect the newly created Group 2’s preferences to make sure they should truly be a standalone customer segment. </p>

<h4 id="group-2-inspection-a-classanchor-idgroup2a">Group 2 Inspection <a class="anchor" id="group2"></a></h4>

<p>The script below modifies the <code>customerTrends</code> data frame to select only customer columns that are in the group we want to inspect. The script then takes the average of the customer’s percent of quantity purchased vs total quantity purchased (the values in the customer columns). The data frame is sorted by most frequently purchased so we can see the group’s central tendency. For Group 2, the central tendency is a preference for low-end mountain bikes.</p>

<div>
  <pre><code class="r"># Inspect Group 2 Preferences --------------------------------------------------
# Select only groups in group num and perform row-wise average of bike prefs
library(dplyr)
group.num &lt;- 2 # Set group number
group.names &lt;- rownames(pca.final.dat[pca.final.dat$group == group.num, ])
groupTrends &lt;- customerTrends %&gt;%
  select(model:price, match(group.names, names(.))) # Use match() to select column names
group.avg &lt;- apply(groupTrends[6:ncol(groupTrends)], 1, mean) # Take average of values
groupTrends &lt;- bind_cols(groupTrends, as_data_frame(group.avg)) %&gt;%
  arrange(-group.avg) 

knitr::kable(head(groupTrends, 10)) # Top ten products by group avg. pct. purchased</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th style="text-align: left">model</th>
      <th style="text-align: left">category1</th>
      <th style="text-align: left">category2</th>
      <th style="text-align: left">frame</th>
      <th style="text-align: left">price</th>
      <th style="text-align: right">Denver Bike Shop</th>
      <th style="text-align: right">Kansas City 29ers</th>
      <th style="text-align: right">value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Catalyst 2</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0256410</td>
      <td style="text-align: right">0.0187266</td>
      <td style="text-align: right">0.0221838</td>
    </tr>
    <tr>
      <td style="text-align: left">Trail 5</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0204259</td>
      <td style="text-align: right">0.0216076</td>
      <td style="text-align: right">0.0210168</td>
    </tr>
    <tr>
      <td style="text-align: left">F-Si Carbon 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Cross Country Race</td>
      <td style="text-align: left">Carbon</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0165146</td>
      <td style="text-align: right">0.0247767</td>
      <td style="text-align: right">0.0206456</td>
    </tr>
    <tr>
      <td style="text-align: left">Scalpel 29 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Cross Country Race</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0186875</td>
      <td style="text-align: right">0.0210314</td>
      <td style="text-align: right">0.0198595</td>
    </tr>
    <tr>
      <td style="text-align: left">Catalyst 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0199913</td>
      <td style="text-align: right">0.0184385</td>
      <td style="text-align: right">0.0192149</td>
    </tr>
    <tr>
      <td style="text-align: left">F-Si 1</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Cross Country Race</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0204259</td>
      <td style="text-align: right">0.0175742</td>
      <td style="text-align: right">0.0190000</td>
    </tr>
    <tr>
      <td style="text-align: left">Trail 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0152108</td>
      <td style="text-align: right">0.0218957</td>
      <td style="text-align: right">0.0185532</td>
    </tr>
    <tr>
      <td style="text-align: left">Trail 1</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0204259</td>
      <td style="text-align: right">0.0164218</td>
      <td style="text-align: right">0.0184238</td>
    </tr>
    <tr>
      <td style="text-align: left">Trail 2</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0208605</td>
      <td style="text-align: right">0.0158456</td>
      <td style="text-align: right">0.0183530</td>
    </tr>
    <tr>
      <td style="text-align: left">Beast of the East 1</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Trail</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0182529</td>
      <td style="text-align: right">0.0181504</td>
      <td style="text-align: right">0.0182017</td>
    </tr>
  </tbody>
</table>

<h4 id="group-4-inspection-a-classanchor-idgroup4a">Group 4 Inspection <a class="anchor" id="group4"></a></h4>

<p>Let’s compare to Group 4. Rerun the previous script changing <code>group.num</code> from 2 to 4. We can see that Group 4’s preference is similar to Group 2 in that both groups prefer low-end/affordable bikes. However, Group 4’s top purchases contain a mixture of Mountain and Road, while Group 2’s top purchases are exclusively Mountain. It appears there is a difference!</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">model</th>
      <th style="text-align: left">category1</th>
      <th style="text-align: left">category2</th>
      <th style="text-align: left">frame</th>
      <th style="text-align: left">price</th>
      <th style="text-align: right">Albuquerque Cycles</th>
      <th style="text-align: right">Dallas Cycles</th>
      <th style="text-align: right">Detroit Cycles</th>
      <th style="text-align: right">Los Angeles Cycles</th>
      <th style="text-align: right">Minneapolis Bike Shop</th>
      <th style="text-align: right">New York Cycles</th>
      <th style="text-align: right">Philadelphia Bike Shop</th>
      <th style="text-align: right">Phoenix Bi-peds</th>
      <th style="text-align: right">Portland Bi-peds</th>
      <th style="text-align: right">Providence Bi-peds</th>
      <th style="text-align: right">San Antonio Bike Shop</th>
      <th style="text-align: right">value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">F-Si 2</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Cross Country Race</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0174825</td>
      <td style="text-align: right">0.0256410</td>
      <td style="text-align: right">0.0119048</td>
      <td style="text-align: right">0.0471698</td>
      <td style="text-align: right">0.0258752</td>
      <td style="text-align: right">0.0246914</td>
      <td style="text-align: right">0.0040816</td>
      <td style="text-align: right">0.0183228</td>
      <td style="text-align: right">0.0186335</td>
      <td style="text-align: right">0.0129151</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0207476</td>
    </tr>
    <tr>
      <td style="text-align: left">Slice Ultegra</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Triathalon</td>
      <td style="text-align: left">Carbon</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0104895</td>
      <td style="text-align: right">0.0085470</td>
      <td style="text-align: right">0.0099206</td>
      <td style="text-align: right">0.0251572</td>
      <td style="text-align: right">0.0076104</td>
      <td style="text-align: right">0.0049383</td>
      <td style="text-align: right">0.0571429</td>
      <td style="text-align: right">0.0133897</td>
      <td style="text-align: right">0.0248447</td>
      <td style="text-align: right">0.0092251</td>
      <td style="text-align: right">0.0537634</td>
      <td style="text-align: right">0.0204572</td>
    </tr>
    <tr>
      <td style="text-align: left">CAAD12 Disc 105</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Elite Road</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0139860</td>
      <td style="text-align: right">0.0085470</td>
      <td style="text-align: right">0.0297619</td>
      <td style="text-align: right">0.0157233</td>
      <td style="text-align: right">0.0136986</td>
      <td style="text-align: right">0.0222222</td>
      <td style="text-align: right">0.0204082</td>
      <td style="text-align: right">0.0176180</td>
      <td style="text-align: right">0.0310559</td>
      <td style="text-align: right">0.0092251</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0185229</td>
    </tr>
    <tr>
      <td style="text-align: left">Catalyst 3</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Sport</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0314685</td>
      <td style="text-align: right">0.0427350</td>
      <td style="text-align: right">0.0178571</td>
      <td style="text-align: right">0.0188679</td>
      <td style="text-align: right">0.0152207</td>
      <td style="text-align: right">0.0024691</td>
      <td style="text-align: right">0.0040816</td>
      <td style="text-align: right">0.0140944</td>
      <td style="text-align: right">0.0186335</td>
      <td style="text-align: right">0.0202952</td>
      <td style="text-align: right">0.0161290</td>
      <td style="text-align: right">0.0183502</td>
    </tr>
    <tr>
      <td style="text-align: left">F-Si Carbon 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Cross Country Race</td>
      <td style="text-align: left">Carbon</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0104895</td>
      <td style="text-align: right">0.0128205</td>
      <td style="text-align: right">0.0238095</td>
      <td style="text-align: right">0.0188679</td>
      <td style="text-align: right">0.0152207</td>
      <td style="text-align: right">0.0271605</td>
      <td style="text-align: right">0.0448980</td>
      <td style="text-align: right">0.0183228</td>
      <td style="text-align: right">0.0139752</td>
      <td style="text-align: right">0.0129151</td>
      <td style="text-align: right">0.0000000</td>
      <td style="text-align: right">0.0180436</td>
    </tr>
    <tr>
      <td style="text-align: left">Synapse Carbon Disc 105</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Endurance Road</td>
      <td style="text-align: left">Carbon</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0139860</td>
      <td style="text-align: right">0.0170940</td>
      <td style="text-align: right">0.0099206</td>
      <td style="text-align: right">0.0125786</td>
      <td style="text-align: right">0.0304414</td>
      <td style="text-align: right">0.0271605</td>
      <td style="text-align: right">0.0285714</td>
      <td style="text-align: right">0.0091614</td>
      <td style="text-align: right">0.0170807</td>
      <td style="text-align: right">0.0166052</td>
      <td style="text-align: right">0.0107527</td>
      <td style="text-align: right">0.0175775</td>
    </tr>
    <tr>
      <td style="text-align: left">CAAD8 Sora</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Elite Road</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0069930</td>
      <td style="text-align: right">0.0213675</td>
      <td style="text-align: right">0.0099206</td>
      <td style="text-align: right">0.0188679</td>
      <td style="text-align: right">0.0273973</td>
      <td style="text-align: right">0.0098765</td>
      <td style="text-align: right">0.0040816</td>
      <td style="text-align: right">0.0204369</td>
      <td style="text-align: right">0.0217391</td>
      <td style="text-align: right">0.0202952</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0165892</td>
    </tr>
    <tr>
      <td style="text-align: left">Synapse Disc 105</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Endurance Road</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0279720</td>
      <td style="text-align: right">0.0213675</td>
      <td style="text-align: right">0.0019841</td>
      <td style="text-align: right">0.0094340</td>
      <td style="text-align: right">0.0121766</td>
      <td style="text-align: right">0.0271605</td>
      <td style="text-align: right">0.0204082</td>
      <td style="text-align: right">0.0155039</td>
      <td style="text-align: right">0.0093168</td>
      <td style="text-align: right">0.0129151</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0163404</td>
    </tr>
    <tr>
      <td style="text-align: left">CAAD12 105</td>
      <td style="text-align: left">Road</td>
      <td style="text-align: left">Elite Road</td>
      <td style="text-align: left">Aluminum</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0069930</td>
      <td style="text-align: right">0.0299145</td>
      <td style="text-align: right">0.0277778</td>
      <td style="text-align: right">0.0188679</td>
      <td style="text-align: right">0.0106545</td>
      <td style="text-align: right">0.0098765</td>
      <td style="text-align: right">0.0326531</td>
      <td style="text-align: right">0.0084567</td>
      <td style="text-align: right">0.0093168</td>
      <td style="text-align: right">0.0018450</td>
      <td style="text-align: right">0.0215054</td>
      <td style="text-align: right">0.0161692</td>
    </tr>
    <tr>
      <td style="text-align: left">Trigger Carbon 4</td>
      <td style="text-align: left">Mountain</td>
      <td style="text-align: left">Over Mountain</td>
      <td style="text-align: left">Carbon</td>
      <td style="text-align: left">[ 415, 3500)</td>
      <td style="text-align: right">0.0069930</td>
      <td style="text-align: right">0.0085470</td>
      <td style="text-align: right">0.0099206</td>
      <td style="text-align: right">0.0125786</td>
      <td style="text-align: right">0.0060883</td>
      <td style="text-align: right">0.0197531</td>
      <td style="text-align: right">0.0285714</td>
      <td style="text-align: right">0.0119803</td>
      <td style="text-align: right">0.0124224</td>
      <td style="text-align: right">0.0239852</td>
      <td style="text-align: right">0.0322581</td>
      <td style="text-align: right">0.0157362</td>
    </tr>
  </tbody>
</table>

<h2 id="conclusion-a-classanchor-idconclusionsa">Conclusion <a class="anchor" id="conclusions"></a></h2>

<p>PCA can be a valuable cross-check to <em>k</em>-means for customer segmentation. While <em>k</em>-means got us close to the true customer segments, visually evaluating the groups using PCA helped identify a different customer segment, one that the <script type="math/tex">k = 5</script> <em>k</em>-means solution did not pick up.  </p>

<h2 id="recap-a-classanchor-idrecapa">Recap <a class="anchor" id="recap"></a></h2>

<p>This post expanded on our customer segmentation methodology by using <strong>PCA to visually examine the clusters</strong>. We manipulated our sales order data to obtain a format that relates products to customer purchases. We used the <code>prcomp()</code> function to perform PCA on our formatted data frame. We fortified the PCA output using the <code>fortify()</code> function from the <code>ggfortify</code> package, which enabled us to plot the PC’s by customer. We added the <em>k</em>-means cluster groups to the fortified data frame for visual inspection of the <em>k</em>-means clusters. We saw that differences can arise because <em>k</em>-means programatically determines the clusters while PCA allows us to visually inspect the clusters. The end result was an improvement to the customer segmentation by attacking the community detection problem from two different angles and combining the results! </p>

<h2 id="further-reading-a-classanchor-idfurther-readinga">Further Reading <a class="anchor" id="further-reading"></a></h2>

<ol>
  <li>
    <p><a href="http://setosa.io/ev/principal-component-analysis/">Pricipal Component Analysis: Explained Visually</a>: This article is an excellent place to start for those that are new to PCA or those that would like to understand the details.</p>
  </li>
  <li>
    <p><a href="https://tgmstat.wordpress.com/2013/11/28/computing-and-visualizing-pca-in-r/">Computing and Visualizing PCA in R</a>: This is a great article that takes PCA to the next level in <code>R</code> with biplots, predictions, and the caret package.  </p>
  </li>
</ol>


	    </div>
	    <!-- Sidebar -->
	    <div class="col-md-3 well well-lg bs-component hidden-print hidden-sm hidden-xs" role="complimentary">
	    	<nav class="bs-docs-sidebar ">
	<ul class="nav bs-docs-sidenav">

		<!-- Feedburer Email Signup-->
		<li>
			<!-- <h5>Interested in Business Science? Subscribe!</h5> -->
			<form style="border:1px solid #ccc;padding:3px;text-align:center;" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=mattdancho', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
                <div class="row">
                    <div class="col-md-12">
                        <p style="color: #2c3e50;">Get <em>Business Science</em> updates:</p>
                        <p><input type="text" style="width:90%; color: #2c3e50; padding-left: 4px;" name="email" placeholder="email address" /></p>
                        <input type="hidden" value="mattdancho" name="uri"/>
                        <input type="hidden" name="loc" value="en_US"/>
                    </div>

                    <div class="col-sm-12 col-md-6">
                        <input type="submit" value="Subscribe" class="btn btn-primary btn-sm" style="margin-bottom: 8px;"/>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <p class="text-center"><a href="http://feeds.feedburner.com/mattdancho"><img src="http://feeds.feedburner.com/~fc/mattdancho?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="75%" style="border:0" alt="" /></a></p>
                    </div>
                </div>
            </form>
		</li>
		<li><hr></li>

		<!-- Post Navigation -->
		
		<li>
			<ul class="pager">
			  
			    <li class="previous">
			    	<a href="/Business/2016/08/07/CustomerSegmentationPt1.html"><i class="fa fa-arrow-circle-left"></i> Prev</a>
			    </li>
			  
			  
			    <li class="next">
			    	<a class="" href="/Business/2016/10/01/CustomerSegmentationPt3.html">Next <i class="fa fa-arrow-circle-right"></i></a>
			    </li>
			  
			</ul>
		</li>
		<li><hr></li>
		

		<!-- Blog Navigation -->
		

		<!-- Recent Posts -->
		<li>
			<h5>Recent Posts</h5>
			<div class="list-group">
				
				<a href="/Business/2016/10/01/CustomerSegmentationPt3.html" class="list-group-item">
					<h6 class="list-group-item-heading">Customer Segmentation Part 3: Network Visualization</h6>
				    
	                  <img src="/assets/custSegments3.png" alt="..." style="width: 100%;">
	                
				</a>
				
				<a href="/Business/2016/09/04/CustomerSegmentationPt2.html" class="list-group-item">
					<h6 class="list-group-item-heading">Customer Segmentation Part 2: PCA for Segment Visualization</h6>
				    
	                  <img src="/assets/custSegments2.png" alt="..." style="width: 100%;">
	                
				</a>
				
				<a href="/Business/2016/08/07/CustomerSegmentationPt1.html" class="list-group-item">
					<h6 class="list-group-item-heading">Customer Segmentation Part 1: K-Means Clustering</h6>
				    
	                  <img src="/assets/custSegments1.png" alt="..." style="width: 100%;">
	                
				</a>
				
			</div>
		</li>
		<li><hr></li>

		<!-- Categories -->
		<li>
			<h5>Categories</h5>
			
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#Technology" aria-expanded="false" aria-controls="R">
				  Technology:
				  <span class="badge">1</span>
				</button>
				<div class="collapse" id="Technology">
				  <div class="list-group">
				    
				      
				      	
				      
				    
				      
				      	
					        <!-- <a href="/Technology/2016/04/09/A-Data-Scientists-Resources.html" class="list-group-item">A Data Scientist's Resources</a> -->
					        <a href="/Technology/2016/04/09/A-Data-Scientists-Resources.html" class="list-group-item">
								<h6 class="list-group-item-heading">A Data Scientist's Resources</h6>
							    
				                  <img src="/assets/sextant.jpg" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				    
				  </div>
				</div>
			</div>
			
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#Business" aria-expanded="false" aria-controls="R">
				  Business:
				  <span class="badge">1</span>
				</button>
				<div class="collapse" id="Business">
				  <div class="list-group">
				    
				      
				      	
				      
				    
				      
				      	
					        <!-- <a href="/Business/2016/05/01/Marketing-Strategy-MBAs-Learn-Analytics.html" class="list-group-item">Marketing Strategy: Why MBAs Can Benefit from Learning Analytics</a> -->
					        <a href="/Business/2016/05/01/Marketing-Strategy-MBAs-Learn-Analytics.html" class="list-group-item">
								<h6 class="list-group-item-heading">Marketing Strategy: Why MBAs Can Benefit from Learning Analytics</h6>
							    
				                  <img src="/assets/digital_woman.jpg" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				    
				  </div>
				</div>
			</div>
			
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#Business" aria-expanded="false" aria-controls="R">
				  Business:
				  <span class="badge">4</span>
				</button>
				<div class="collapse" id="Business">
				  <div class="list-group">
				    
				      
				      	
				      
				    
				      
				      	
					        <!-- <a href="/Business/2016/10/01/CustomerSegmentationPt3.html" class="list-group-item">Customer Segmentation Part 3: Network Visualization</a> -->
					        <a href="/Business/2016/10/01/CustomerSegmentationPt3.html" class="list-group-item">
								<h6 class="list-group-item-heading">Customer Segmentation Part 3: Network Visualization</h6>
							    
				                  <img src="/assets/custSegments3.png" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				      	
					        <!-- <a href="/Business/2016/09/04/CustomerSegmentationPt2.html" class="list-group-item">Customer Segmentation Part 2: PCA for Segment Visualization</a> -->
					        <a href="/Business/2016/09/04/CustomerSegmentationPt2.html" class="list-group-item">
								<h6 class="list-group-item-heading">Customer Segmentation Part 2: PCA for Segment Visualization</h6>
							    
				                  <img src="/assets/custSegments2.png" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				      	
					        <!-- <a href="/Business/2016/08/07/CustomerSegmentationPt1.html" class="list-group-item">Customer Segmentation Part 1: K-Means Clustering</a> -->
					        <a href="/Business/2016/08/07/CustomerSegmentationPt1.html" class="list-group-item">
								<h6 class="list-group-item-heading">Customer Segmentation Part 1: K-Means Clustering</h6>
							    
				                  <img src="/assets/custSegments1.png" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				      	
					        <!-- <a href="/Business/2016/07/12/orderSimulatoR.html" class="list-group-item">orderSimulatoR: Simulate Orders for Business Analytics</a> -->
					        <a href="/Business/2016/07/12/orderSimulatoR.html" class="list-group-item">
								<h6 class="list-group-item-heading">orderSimulatoR: Simulate Orders for Business Analytics</h6>
							    
				                  <img src="/assets/cannondale_bike.jpg" alt="..." style="width: 100%;">
				                
							</a>
					    
				      
				    
				  </div>
				</div>
			</div>
			
		</li>
		<li><hr></li>

		<!-- Tags -->
		<li>
			<h5>Tags</h5>
			<div>
				<!-- https://blog.lanyonm.org/articles/2013/11/21/alphabetize-jekyll-page-tags-pure-liquid.html -->
				
				

				
				
				<a href="/tags/#BI" class="btn btn-primary btn-xs">BI: <span class="badge">1</span></a>
				
				
				<a href="/tags/#CRM" class="btn btn-primary btn-xs">CRM: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Code" class="btn btn-primary btn-xs">Code: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Community Detection" class="btn btn-primary btn-xs">Community Detection: <span class="badge">3</span></a>
				
				
				<a href="/tags/#Customer Segmentation" class="btn btn-primary btn-xs">Customer Segmentation: <span class="badge">3</span></a>
				
				
				<a href="/tags/#Data Mining" class="btn btn-primary btn-xs">Data Mining: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Excel" class="btn btn-primary btn-xs">Excel: <span class="badge">1</span></a>
				
				
				<a href="/tags/#MBA" class="btn btn-primary btn-xs">MBA: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Marketing" class="btn btn-primary btn-xs">Marketing: <span class="badge">1</span></a>
				
				
				<a href="/tags/#PCA" class="btn btn-primary btn-xs">PCA: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Python" class="btn btn-primary btn-xs">Python: <span class="badge">1</span></a>
				
				
				<a href="/tags/#R" class="btn btn-primary btn-xs">R: <span class="badge">5</span></a>
				
				
				<a href="/tags/#R-Project" class="btn btn-primary btn-xs">R-Project: <span class="badge">4</span></a>
				
				
				<a href="/tags/#SQL" class="btn btn-primary btn-xs">SQL: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Sales Data Scientist" class="btn btn-primary btn-xs">Sales Data Scientist: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Salesforce" class="btn btn-primary btn-xs">Salesforce: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Simulation" class="btn btn-primary btn-xs">Simulation: <span class="badge">1</span></a>
				
				
				<a href="/tags/#Strategy" class="btn btn-primary btn-xs">Strategy: <span class="badge">1</span></a>
				
				
				<a href="/tags/#bikes data set" class="btn btn-primary btn-xs">bikes data set: <span class="badge">4</span></a>
				
				
				<a href="/tags/#igraph" class="btn btn-primary btn-xs">igraph: <span class="badge">1</span></a>
				
				
				<a href="/tags/#kmeans" class="btn btn-primary btn-xs">kmeans: <span class="badge">1</span></a>
				
				
				<a href="/tags/#networkD3" class="btn btn-primary btn-xs">networkD3: <span class="badge">1</span></a>
				
				
				<a href="/tags/#orderSimulatoR" class="btn btn-primary btn-xs">orderSimulatoR: <span class="badge">1</span></a>
				
				
				<a href="/tags/#prcomp" class="btn btn-primary btn-xs">prcomp: <span class="badge">1</span></a>
				
				
				<a href="/tags/#silhouette" class="btn btn-primary btn-xs">silhouette: <span class="badge">1</span></a>
				
			</div>

		</li>
		<li><hr></li>

		<!-- Resources -->
		<li>
			<h5>Resources</h5>
			<!-- R -->
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#R" aria-expanded="false" aria-controls="R">
				  R: <span class="badge">0</span>
				</button>
				<div class="collapse" id="R">
				  <div class="list-group">
				    
				  </div>
				</div>
			</div>

			<!-- Python -->
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#Python" aria-expanded="false" aria-controls="Python">
				  Python: <span class="badge">0</span>
				</button>
				<div class="collapse" id="Python">
				  <div class="list-group">
				    
				  </div>
				</div>
			</div>

			<!-- Power BI -->
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#PowerBI" aria-expanded="false" aria-controls="PowerBI">
				  Power BI: <span class="badge">0</span>
				</button>
				<div class="collapse" id="PowerBI">
				  <div class="list-group">
				    
				  </div>
				</div>
			</div>

			<!-- Tableau -->
			<div class = "button-margin">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#Tableau" aria-expanded="false" aria-controls="Tableau">
				  Tableau: <span class="badge">0</span>
				</button>
				<div class="collapse" id="Tableau">
				  <div class="list-group">
				    
				  </div>
				</div>
			</div>

			<!-- Excel -->
			<div class = "button-margin">
				<button class="btn btn-primary" style="width: 100%;" type="button" data-toggle="collapse" data-target="#Excel" aria-expanded="false" aria-controls="Excel">
				  Excel <span class="badge">0</span>
				</button>
				<div class="collapse" id="Excel">
				  <div class="list-group">
					
				  </div>
				</div>
			</div>

		</li>
		<!-- <li><hr></li> -->


	</ul>
</nav>
	    </div>
    </div>


  </div>

  <div class="container">
  	<div class="col-md-8 col-md-offset-1">
		<div class="PageNavigation">
		  
		    <a class="prev" href="/Business/2016/08/07/CustomerSegmentationPt1.html">
		    	<i class="fa fa-arrow-circle-left"></i>
		    	Customer Segmentation Part 1: K-Means Clustering
		    </a>
		  
		  
		    <a class="next pull-right" href="/Business/2016/10/01/CustomerSegmentationPt3.html">
		    	Customer Segmentation Part 3: Network Visualization
				<i class="fa fa-arrow-circle-right"></i>
		    </a>
		  
		</div>
	</div>
	 </div>
</section>

<!-- Disqus -->
<div class="container">
	<div class="col-md-8 col-md-offset-1">
	Include file 'disqus.html disqus_identifier=page.disqus_identifier' contains invalid characters or sequences
	</div>
</div>


<!-- htmlwidgets dependencies -->
<!--  -->


	<!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">

                    <div class="footer-col col-md-4">
                        <h3 class="footer">About the Site</h3>
                        <p>This site is dedicated to using data science and analytics in a variety of business and investment settings to gain insights beyond face-value. <a href="/about.html">Learn more</a>.</p>
                    </div>

                    <div class="footer-col col-md-4">
                        <h3 class="footer">Around the Web</h3>
                        <ul class="list-inline">
                            <li>
                                <a href="http://www.mattdancho.com/atom.xml" class="btn-social btn-outline"><i class="fa fa-fw fa-rss"></i></a>
                            </li>
                            <li>
                                <a href="mailto:mdancho@gmail.com" class="btn-social btn-outline"><i class="fa fa-fw fa-envelope"></i></a>
                            </li>
                            <li>
                                <a href="https://github.com/mdancho84" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
                            <li>
                                <a href="https://www.linkedin.com/in/mattdancho" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
                        </ul>
                    </div>

                    <div class="footer-col col-md-4">
                        <!-- <h3 class="footer">Location</h3>
                        <p>State College, PA</p> -->
                        <h3 class="footer">Interested?</h3>
                        <div class="well">
                            <form style="border:1px solid #ccc;padding:3px;text-align:center;" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=mattdancho', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
                                <div class="row">
                                    <div class="col-md-12">
                                        <p style="color: #2c3e50;">Get <em>Business Science</em> updates:</p>
                                        <p><input type="text" style="width:90%; color: #2c3e50; padding-left: 4px;" name="email" placeholder="email address" /></p>
                                        <input type="hidden" value="mattdancho" name="uri"/>
                                        <input type="hidden" name="loc" value="en_US"/>
                                    </div>

                                    <div class="col-sm-12 col-md-6">
                                        <input type="submit" value="Subscribe" class="btn btn-primary btn-sm" style="margin-bottom: 8px;"/>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                        <p class="text-center"><a href="http://feeds.feedburner.com/mattdancho"><img src="http://feeds.feedburner.com/~fc/mattdancho?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></p>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; www.mattdancho.com 2016
                    </div>
                </div>
            </div>
        </div>
    </footer>

	<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll" id="top-link-block">
            <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <!-- jQuery -->
    <script src="/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    <!-- <script src="/js/contact_me.js"></script> -->

    <!-- MathJax processing for LaTeX -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    <!-- Highlightjs -->
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>
    <script src="/js/scripts.js"></script>

    <!-- Google+ -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <!-- Facebook -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>


    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-76139189-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/Business/2016/09/04/CustomerSegmentationPt2.html',
		  'title': 'Post'
		});
	</script>
	<!-- End Google Analytics -->



</body>

</html>
